{"title":"About the Disproportionality Index","markdown":{"yaml":{"title":"About the Disproportionality Index","format":"html","editor":"visual","theme":"default"},"headingText":"Load required packages","containsRefs":false,"markdown":"\n\n\n```{r setup, include=FALSE}\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(png)\nlibrary(ggimage)\nlibrary(ggwaffle) #devtools::install_github(\"liamgilbey/ggwaffle\")\nlibrary(emojifont)\nlibrary(MetBrewer)\nlibrary(tidyverse)\n\n```\n\n## Estimating Median Salary\n\n[Median salaries](LINK) for each group were estimated using the following formula:\n\n$$median = L + \\frac{ (\\frac{n}{2} â€“ F) }{f}  * w$$ \n\n\n## Calculating DI\nIn this analysis, Disproportionality Index (DI) is used as a measure of equitable representation. It is calculated as below.\n\n$$\\frac{\\%_{Group\\: X; \\:salary\\: range \\: i}}{\\% _{All \\:Employees; \\:salary\\: range \\: i}} = DI _{Group\\:X; \\:salary\\:range\\:i}$$\n\nFor example, 23.51% of Black employees and 16.70% of all employees are are within the \\<60K salary range. This gives us a DI of 1.41.\n\n$$ DI_{Black \\: employees; <60K } =\\frac{23.51\\%}{16.70\\%} = 1.41$$\n\nFor a table of DI's per year, [please see here](LINK).\n\n## Understanding DI - An Example\n\nSuppose that we have a department of 500 employees. There are two groups of self-identifying minority employees, A and B. Group C is composed of the majority at 460 employees. Groups A and B make up 4% of employees at 20 employees each, which happens to mirror the Canadian population. At a glance, representation seems equal.\n\n```{r Plot-1, echo = FALSE}\n# Create dataframe with group numbers repeated\nDept_data <- tibble(Group_count = rep(\"A\", 20) %>% \n                      c(rep(\"B\", 20)) %>% \n                      c(rep(\"C\", 460)) )\n\n# Move data to waffle object for plotting\nDept_data_waffle <- waffle_iron(Dept_data, \n                                aes_d(group = Group_count), \n                                rows = 20) %>% \n  mutate(label = fontawesome('fa-male'))\n\n\n## Plot symbols -----------------------------------------------\n\n# Create color palette \ncolors <- c(met.brewer(\"Johnson\", 5)[c(1,5)], \"#808080\")\n\n# Plot as waffle   \nggplot(Dept_data_waffle, aes(x, y, colour = group)) + \n  geom_text(aes(label=label), \n            family = 'fontawesome-webfont', \n            size = 5) +\n  coord_equal() + \n  scale_colour_manual(values = c(colors)) + \n  theme_waffle()  +\n  theme(axis.title.x = element_blank(),\n        axis.title.y = element_blank(), \n        text = element_text(size = 12)) + \n  guides(color = guide_legend(title=\"Group\"))\n  \n  \n```\n\nHowever, if you take a closer look at how the 20 employees from group A and B are distributed across salary levels, a different story appears. Group A is equally distributed among salary level, but the majority of group B employees remain at the lowest salary levels.\n\n![Salary Scaffold](images/salary-scaffold.png)\n\nCalculating DI further illustrates the differences in salary distribution. Above a DI of 1, a group's representation at a salary level is higher than the average of all employees. Below a DI of 1, a group's representation at a salary level is lower than the average of all employees.\n\n```{r Plot 2-DI Example, echo = FALSE, message = FALSE, warning = FALSE}\nGroup <- c(rep(\"A\", 5), rep(\"B\", 5))\nSalary <- c(\"<60.0K\", \"60.0-69.9K\", \"70.0-84.9K\", \"85.0-99.9K\", \"100.0K+\", \"<60.0K\", \"60.0-69.9K\", \"70.0-84.9K\", \"85.0-99.9K\", \"100.0K+\")\nDI <- c(.75, 1, 1.25, 1, 1, 1.5, 1.5, 1, .75, .25)\n\nSalary_di <- data.frame(Group, Salary, DI)\n\nSalary_di$Salary <- factor(Salary_di$Salary, levels = c(\"<60.0K\", \"60.0-69.9K\", \"70.0-84.9K\", \"85.0-99.9K\", \"100.0K+\"))\n\ncolors <- c(met.brewer(\"Johnson\", 5)[c(1,5)])\n\nggplot(Salary_di) +\n  geom_bar(stat = \"identity\",\n           position = \"dodge\",\n           aes(x = Group,\n               y = DI,\n               fill = Group, \n               alpha = Salary)) +\n  theme_minimal() +\n  theme(\n    panel.grid.major = element_blank(),\n    panel.grid.minor = element_blank(),\n    panel.background = element_blank(),\n    axis.line = element_line(colour = \"black\"), \n    text = element_text(size = 15),\n    legend.text = element_text(size = 12)\n  ) +\n  scale_fill_manual  (values = colors, \n  ) +\n  labs(title = NULL,\n       x = \"Group\",\n       y = \"Disproportionality Index\",\n       fill = NULL) + \n  guides(fill=\"none\") +\n    geom_hline(yintercept = 1, \n             linetype = \"dashed\")\n\n```\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"DI.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","theme":"cosmo","title":"About the Disproportionality Index","editor":"visual"},"extensions":{"book":{"multiFile":true}}}}}